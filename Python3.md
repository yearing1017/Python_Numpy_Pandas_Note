# ğŸ’¡ Python3 ç›¸å…³çŸ¥è¯†
## 1. Python3çš„æ ¼å¼åŒ–è¾“å‡º
- åœ¨Pythonä¸­ï¼Œé‡‡ç”¨çš„æ ¼å¼åŒ–æ–¹å¼å’ŒCè¯­è¨€æ˜¯ä¸€è‡´çš„ï¼Œç”¨%å®ç°ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š
```python
>>> 'Hello, %s' % 'world'
'Hello, world'
>>> 'Hi, %s, you have $%d.' % ('Michael', 1000000)
'Hi, Michael, you have $1000000.'
```
- `%`è¿ç®—ç¬¦å°±æ˜¯ç”¨æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ã€‚åœ¨å­—ç¬¦ä¸²å†…éƒ¨ï¼Œ`%s`è¡¨ç¤ºç”¨å­—ç¬¦ä¸²æ›¿æ¢ï¼Œ`%d`è¡¨ç¤ºç”¨æ•´æ•°æ›¿æ¢;
- æœ‰å‡ ä¸ª`%?`å ä½ç¬¦ï¼Œåé¢å°±è·Ÿå‡ ä¸ªå˜é‡æˆ–è€…å€¼ï¼Œé¡ºåºè¦å¯¹åº”å¥½ã€‚å¦‚æœåªæœ‰ä¸€ä¸ª`%?`ï¼Œæ‹¬å·å¯ä»¥çœç•¥ã€‚
- å¸¸è§çš„å ä½ç¬¦ï¼š
> | å ä½ç¬¦ |   æ›¿æ¢å†…å®¹   |
> | :----- | :----------: |
> | %d     |     æ•´æ•°     |
> | %f     |    æµ®ç‚¹æ•°    |
> | %s     |    å­—ç¬¦ä¸²    |
> | %x     | åå…­è¿›åˆ¶æ•´æ•° |
- æ ¼å¼åŒ–æ•´æ•°å’Œæµ®ç‚¹æ•°è¿˜å¯ä»¥æŒ‡å®šæ˜¯å¦è¡¥0å’Œæ•´æ•°ä¸å°æ•°çš„ä½æ•°:
```python
print('%2d-%02d' % (3, 1))
print('%.2f' % 3.1415926)

# è¾“å‡º,.è¡¨ç¤ºç©ºæ ¼
# .3-01
# 3ï¼Œ14
```
- ä¸Šé¢çš„%2dè¡¨ç¤ºè¾“å‡ºçš„å®½åº¦ä¸º2ï¼Œå³å¯¹é½ï¼Œæ‰€ä»¥åœ¨3å‰é¢åŠ ä¸€ä¸ªç©ºæ ¼ã€‚
- %02dè¡¨ç¤ºè¾“å‡ºçš„å®½åº¦ä¸º2ï¼Œ0è¡¨ç¤ºä¸å¤Ÿå®½åº¦ç”¨0è¡¥é½ã€‚
- å¦‚æœä¸å¤ªç¡®å®šåº”è¯¥ç”¨ä»€ä¹ˆï¼Œ%sæ°¸è¿œèµ·ä½œç”¨ï¼Œå®ƒä¼šæŠŠä»»ä½•æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š
```python
>>> 'Age: %s. Gender: %s' % (25, True)
'Age: 25. Gender: True'
```
- å¦‚æœå­—ç¬¦ä¸²é‡Œé¢çš„%æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦è½¬ä¹‰ï¼Œç”¨%%æ¥è¡¨ç¤ºä¸€ä¸ª%ï¼š
```python
>>> 'growth rate: %d %%' % 7
'growth rate: 7 %'
```
- å¦ä¸€ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²çš„format()æ–¹æ³•ï¼Œå®ƒä¼šç”¨ä¼ å…¥çš„å‚æ•°ä¾æ¬¡æ›¿æ¢å­—ç¬¦ä¸²å†…çš„å ä½ç¬¦{0}ã€{1}:
```python
>>> 'Hello, {0}, æˆç»©æå‡äº† {1:.1f}%'.format('å°æ˜', 17.125)
'Hello, å°æ˜, æˆç»©æå‡äº† 17.1%'
```
## 2. Python3çš„Withè¯­å¥

- æœ¬æ å°†æ€»ç»“`with`è¯­å¥çš„çŸ¥è¯†ç‚¹åŠåŸç†

### 2.1 withä¸æ–‡ä»¶ç›¸å…³

- åœ¨è¯»å†™æ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Š**å¼‚å¸¸å¤„ç†**æ“ä½œï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```python
try:
    fileReader = open('students.txt', 'r')

    for row in fileReader:
        print(row.strip())
except:
    print('Read file failed')
finally:
    fileReader.close()
```

- ä¸Šè¿°**å¼‚å¸¸å¤„ç†**æ“ä½œéå¸¸ç¹çï¼Œä¸Šè¿°å¯ä»¥ä½¿ç”¨withè¯­å¥æ¥ä»£æ›¿ã€‚
- `with`è¯­å¥é€‚ç”¨äºå¯¹èµ„æºè¿›è¡Œè®¿é—®çš„åœºåˆï¼Œ**ç¡®ä¿ä¸ç®¡ä½¿ç”¨è¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œå¿…è¦çš„â€œæ¸…ç†â€æ“ä½œï¼Œé‡Šæ”¾èµ„æºï¼Œæ¯”å¦‚æ–‡ä»¶ä½¿ç”¨åè‡ªåŠ¨å…³é—­ã€çº¿ç¨‹ä¸­é”çš„è‡ªåŠ¨è·å–å’Œé‡Šæ”¾ç­‰**ã€‚
- æ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œé€šè¿‡ä½¿ç”¨`with`è¯­å¥æ”¹é€ ï¼Œå°±å˜æˆäº†ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

```python
with open('students.txt', 'r') as fileReader:
    for row in fileReader:
        print(row.strip())
```

### 2.2 withè¯­å¥åŸç†

- è¦ææ¸…æ¥š`with`è¯­å¥çš„åŸç†ï¼Œå…ˆè¦çœ‹ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µï¼š
  - **ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼ˆContext Management Protocolï¼‰**ï¼šåŒ…å«æ–¹æ³• `__enter__()`å’Œ`__exit__()`ï¼Œæ”¯æŒè¯¥åè®®çš„å¯¹è±¡è¦å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚
  - **ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆContext Managerï¼‰**ï¼šæ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®çš„å¯¹è±¡ï¼Œè¿™ç§å¯¹è±¡å®ç°äº†`__enter__()`å’Œ`__exit__()`æ–¹æ³•ã€‚ä¸Šä¸‹æ–‡ç®¡ç†å™¨å®šä¹‰æ‰§è¡Œ`with`è¯­å¥æ—¶è¦å»ºç«‹çš„è¿è¡Œæ—¶ä¸Šä¸‹æ–‡ï¼Œè´Ÿè´£æ‰§è¡Œ`with`è¯­å¥å—ä¸Šä¸‹æ–‡ä¸­çš„è¿›å…¥ä¸é€€å‡ºæ“ä½œã€‚é€šå¸¸ä½¿ç”¨`with`è¯­å¥è°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥è°ƒç”¨å…¶æ–¹æ³•æ¥ä½¿ç”¨ã€‚
- ä¸€æ®µåŸºæœ¬çš„withè¯­å¥å—å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
with EXPR as VAR:
    BLOCK
```

- å…¶ä¸­**EXPRå¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼›as VARæ˜¯å¯é€‰çš„**ã€‚å…¶ä¸€èˆ¬çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š

  - **æ‰§è¡ŒEXPR**ï¼Œç”Ÿæˆä¸Šä¸‹æ–‡ç®¡ç†å™¨context_managerï¼›
  - **è·å–ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„`__exit()__`æ–¹æ³•**ï¼Œå¹¶ä¿å­˜èµ·æ¥ç”¨äºä¹‹åçš„è°ƒç”¨ï¼›
  - **è°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„`__enter__()`æ–¹æ³•**ï¼›å¦‚æœä½¿ç”¨äº†`as`å­å¥ï¼Œåˆ™å°†`__enter__()`æ–¹æ³•çš„è¿”å›å€¼èµ‹å€¼ç»™`as`å­å¥ä¸­çš„VARï¼›
  - **æ‰§è¡ŒBLOCKä¸­çš„è¡¨è¾¾å¼ï¼›**
  - ä¸ç®¡æ˜¯å¦æ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„`__exit__()`æ–¹æ³•ï¼Œ`__exit__()`æ–¹æ³•è´Ÿè´£æ‰§è¡Œâ€œæ¸…ç†â€å·¥ä½œï¼Œå¦‚é‡Šæ”¾èµ„æºç­‰ã€‚å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œæˆ–è€…è¯­å¥ä½“ä¸­æ‰§è¡Œäº†è¯­å¥`break/continue/return`ï¼Œåˆ™ä»¥`None`ä½œä¸ºå‚æ•°è°ƒç”¨`__exit__(None, None, None)`ï¼›å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œåˆ™ä½¿ç”¨`sys.exc_info`å¾—åˆ°çš„å¼‚å¸¸ä¿¡æ¯ä¸ºå‚æ•°è°ƒç”¨`__exit__(exc_type, exc_value, exc_traceback)`ï¼›
  - å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¦‚æœ`__exit__(type, value, traceback)`è¿”å›Falseï¼Œåˆ™ä¼šé‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œè®©`with`ä¹‹å¤–çš„è¯­å¥é€»è¾‘æ¥å¤„ç†å¼‚å¸¸ï¼Œè¿™ä¹Ÿæ˜¯é€šç”¨åšæ³•ï¼›å¦‚æœè¿”å›Trueï¼Œåˆ™å¿½ç•¥å¼‚å¸¸ï¼Œä¸å†å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚

- **è‡ªå®šä¹‰å®ç°ä¸Šä¸‹æ–‡ç®¡ç†å™¨**

  å­¦å®Œäº†`with`è¯­å¥çš„å†…åœ¨åŸç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æŒ‰ç…§è¿™ä¸ªåŸç†ï¼Œå®ç°æˆ‘ä»¬è‡ªå·±çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚è‡ªå®šä¹‰çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨è¦å®ç°ä¸Šä¸‹æ–‡ç®¡ç†åè®®æ‰€éœ€è¦çš„`__enter__()`å’Œ`__exit__()`ä¸¤ä¸ªæ–¹æ³•ï¼š

```python
class DBManager(object):
    def __init__(self):
        pass

    def __enter__(self):
        print('__enter__')
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print('__exit__')
        return True

def getInstance():
        return DBManager()

with getInstance() as dbManagerIns:
    print('with demo')
```

- ä»£ç è¿è¡Œç»“æœ

```python
__enter__
with demo
__exit__
```

## 3. __all__çš„ç”¨æ³•

- pythonæ¨¡å—ä¸­çš„__all__ï¼Œç”¨äºæ¨¡å—å¯¼å…¥æ—¶é™åˆ¶ï¼Œå¦‚ï¼š`from module import *`
- æ­¤æ—¶è¢«å¯¼å…¥æ¨¡å—è‹¥å®šä¹‰äº†__all__å±æ€§ï¼Œåˆ™åªæœ‰__all__å†…æŒ‡å®šçš„å±æ€§ã€æ–¹æ³•ã€ç±»å¯è¢«å¯¼å…¥ï¼›è‹¥æ²¡å®šä¹‰ï¼Œåˆ™å¯¼å…¥æ¨¡å—å†…çš„æ‰€æœ‰å…¬æœ‰å±æ€§ï¼Œæ–¹æ³•å’Œç±»ã€‚
- å®ä¾‹1ï¼š
```python
#bb.py
class A():
    def __init__(self,name,age):
        self.name=name
        self.age=age
class B():
    def __init__(self,name,id):
        self.name=name
        self.id=id
def fun():
    print "func() is run!"
def fun1():
    print "func1() is run!"


#test_bb.py
from bb import *
a=A('zhansan','18')
print a.name,a.age
b=B("lisi",1001)
print b.name,b.id
fun()
fun1()
#è¾“å‡ºç»“æœï¼š
zhansan 18
lisi 1001
func() is run!
func1() is run!
```
- æ³¨ï¼šç”±äºbb.pyä¸­æ²¡æœ‰å®šä¹‰__all__å±æ€§ï¼Œæ‰€ä»¥å¯¼å…¥äº†bb.pyä¸­æ‰€æœ‰çš„å…¬æœ‰å±æ€§

- å®ä¾‹2ï¼š
```python
#bb.py
__all__=('A','func')
class A():
    def __init__(self,name,age):
        self.name=name
        self.age=age
class B():
    def __init__(self,name,id):
        self.name=name
        self.id=id
def func():
    print "func() is run!"
def func1():
    print "func1() is run!"
#test_bb.py
from bb import *
a=A('zhansan','18')
print a.name,a.age
func()
#b=B("lisi",1001)
#NameError: name 'B' is not defined
#func1()
#NameError: name 'func1' is not defined ã€€
#è¿è¡Œç»“æœï¼š
zhansan 18
func() is run!
```
- æ³¨ï¼šç”±äºbb.pyä¸­ä½¿ç”¨äº†__all__=('A','func')ï¼Œæ‰€ä»¥åœ¨åˆ«çš„æ¨¡å—å¯¼å…¥è¯¥æ¨¡å—æ—¶ï¼Œåªèƒ½å¯¼å…¥__all__ä¸­çš„å˜é‡ã€æ–¹æ³•ã€ç±»

- å®ä¾‹3ï¼š
```python
#bb.py
def func(): #æ¨¡å—ä¸­çš„publicæ–¹æ³•
    print 'func() is run!'
def _func(): #æ¨¡å—ä¸­çš„protectedæ–¹æ³•
    print '_func() is run!'
def __func(): #æ¨¡å—ä¸­çš„privateæ–¹æ³• 
    print '__func() is run!'

#test_bb.py
from bb import *  
#æ­¤æ–¹å¼åªèƒ½å¯¼å…¥å…¬æœ‰çš„å±æ€§ã€æ–¹æ³•ã€ç±»ã€æ— æ³•å¯¼å…¥ä»¥å•ä¸‹åˆ’çº¿å¼€å¤´ï¼ˆprotectedï¼‰æˆ–ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´(private)çš„å±æ€§ã€æ–¹æ³•ã€ç±»ã€‘
func()
#_func()
#__func()

#è¿è¡Œç»“æœï¼š
func() is run!
```
- å®ä¾‹4ï¼š
```python
#bb.py
__all__=('func','__func','_A')#æ”¾å…¥__all__ä¸­æ‰€æœ‰å±æ€§å‡å¯å¯¼å…¥ï¼Œå³ä½¿æ˜¯ä»¥ä¸‹åˆ’çº¿å¼€å¤´
class _A():
    def __init__(self,name):
        self.name=name
def func():
    print "func() is run!"
def func1():
    print "func1() is run!"
def _func():
    print "_func() is run!"
def __func():
    print "__func() is run!"


#test_bb.py
from bb import *
func()
#func1()#func1ä¸åœ¨__all__ä¸­ï¼Œæ— æ³•å¯¼å…¥ NameError: name 'func1' is not defined 
#_func()#_funcä¸åœ¨__all__ä¸­ï¼Œæ— æ³•å¯¼å…¥ NameError: name '_func' is not defined
__func()#__funcåœ¨__all__ä¸­ï¼Œå¯ä»¥å¯¼å…¥
a=_A('zhangsan')#_Aåœ¨__all__ä¸­ï¼Œå¯ä»¥å¯¼å…¥
print a.name


#è¿è¡Œç»“æœï¼š
func() is run!
__func() is run!
zhangsan
```
- æ”¾å…¥__all__ä¸­æ‰€æœ‰å±æ€§å‡å¯å¯¼å…¥ï¼Œå³ä½¿æ˜¯ä»¥ä¸‹åˆ’çº¿å¼€å¤´

## 4.  globçš„ä½¿ç”¨
- globå¯ä»¥æŸ¥æ‰¾ç¬¦åˆç‰¹å®šè§„åˆ™çš„æ–‡ä»¶è·¯å¾„åï¼Œä½¿ç”¨è¯¥æ¨¡å—æŸ¥æ‰¾æ–‡ä»¶ï¼Œåªéœ€è¦ç”¨åˆ°ï¼š â€œ\*â€, â€œ?â€, â€œ[]â€è¿™ä¸‰ä¸ªåŒ¹é…ç¬¦
    - â€\*â€åŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼›
    - â€?â€åŒ¹é…å•ä¸ªå­—ç¬¦ï¼›
    - â€[]â€åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ï¼Œå¦‚ï¼š[0-9]åŒ¹é…æ•°å­—.
- glob.globç”¨æ³•ï¼šè¿”å›æ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ã€‚å®ƒåªæœ‰ä¸€ä¸ªå‚æ•°pathnameï¼Œå®šä¹‰äº†æ–‡ä»¶è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œè¿™é‡Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚
- ä¸‹é¢æ˜¯ä½¿ç”¨glob.globçš„ä¾‹å­ï¼š
```python
for xmlPath in glob.glob('/media/ai1/DATAPART11/LIDC-IDRI' +"/*"):
#è§£é‡Šï¼šéå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
 
for xmlPath in glob.glob(xmlPath + "/*/*"):
#è§£é‡Šï¼šéå†æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰æ–‡ä»¶ï¼Œ/*/*å¯ä»¥æ ¹æ®æ–‡ä»¶å¤¹å±‚æ•°è‡ªä¸»è®¾å®š
  
img_path = sorted(glob.glob(os.path.join(images, '*.npy')))
#è§£é‡Šï¼šéå†æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰npyæ–‡ä»¶,å­˜åˆ°ä¸€ä¸ªlistä¸­
 
import glob
#è·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡
print glob.glob(r"E:/Picture/*/*.jpg")
#è·å–ä¸Šçº§ç›®å½•çš„æ‰€æœ‰.pyæ–‡ä»¶
print glob.glob(r'../*.py') #ç›¸å¯¹è·¯å¾„
```
